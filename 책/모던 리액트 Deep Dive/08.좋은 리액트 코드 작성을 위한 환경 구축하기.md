## ESLint를 활용한 정적 코드 분석

- ESLint의 코드 분석
  1. 자바스크립트 코드를 문자열로 읽는다.
  2. 자바스크립트 코드를 분석할 수 있는 파서(parser)로 코드를 구조화한다.
  3. 2번에서 구조화한 트리를 AST(Abstract Syntax Tree)라 하며, 트리를 기준으로 규칙과 대조한다.
  4. 규칙과 대조했을 때 이를 위반한 코드를 알리거나 수정한다. (report or fix)
- ESLint는 자바스크립트를 분석할 때 기본 값으로 espree 파서를 사용한다.

### eslint-plugin과 eslint-config

- eslint-plugin
  - 규칙들을 모아 놓은 패키지
    - 예) eslint-plugin-react : 리액트 관련된 규칙 제공
- elint-config
  - 특정 프레임워크나 도메인과 관련된 규칙을 묶어서 제공
    - 예시) eslint-config-airbnb

### 나만의 ESLint 규칙 만들기

- 17버전 부터 필요 없는 `import React from 'react'` 를 금지 시키는 no-restricted-imports

```tsx
// .eslintrc.js 파일
modlue.exports = {
  rules: {
    'no-restricted-imports': [
      'error',
      {
        // paths에 금지시킬 모듈을 추가한다.
        paths: [
          {
            // 모듈명
            name: 'react',
            // 모듈의 이름 - default export 만 금지
            importNames: ['default'],
            // 경고 메시지
            message: "import React from 'react'는 react 17부터 ...",
          },
        ],
      },
    ],
  },
};
```

### 주의할 점

- ESLint를 잘못 설정해두면 원치 않는 결과가 계속해서 발생하게 된다.
- Prettier와의 충돌
  - ESLint는 코드의 잠재적인 문제가 될 수 있는 부분을 분석해 준다면, Prettier는 포매팅과 관련된 작업, 즉 줄바꿈, 들여쓰기, 작은따옴표와 큰따옴표 등을 담당한다.
  - ESlint는 자바스크립트에서만 작동하지만, Prettier는 HTML, CSS, 마크다운, JSON 등 다양한 언어에도 적용 가능하다.
- 충돌을 해결하는 두 가지 방법
  - Prettier에서 제공하는 규칙을 어기지 않도록, ESLint에서는 해당 규칙을 끄는 방법
  - 자바스크립트나 타입스크립트는 ESLint에, 그 외의 파일(마크다운, YAML, JSON 등)은 모두 Prettier에 맡기는 것
