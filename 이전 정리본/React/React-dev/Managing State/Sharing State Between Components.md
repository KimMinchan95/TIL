# Sharing State Between Components

- 두 컴포넌트의 state가 항상 함께 변경되기를 원할 때, 각 컴포넌트에서 state를 제거하고 가장 가까운 부모 컴포넌트로 옮긴 후 props로 전달해야 한다.
- 이 방법을 **State 끌어올리기**라고 한다.

## State 끌어올리기 예제

**State 끌어올리기 세 단계**
1. 자식 컴포넌트의 state를 **제거**한다.
2. 하드 코딩된 값을 공통 부모로부터 **전달**한다.
3. 공통 부모에 state를 **추가**하고 이벤트 핸들러와 함께 전달 한다.

## Step 1: 자식 컴포넌트에서 state 제거하기

- 제어권을 부모 컴포넌트에게 준다.
- props 내리꽂기(props drilling)을 통해 부모컴포넌트에서 자식 컴포넌트를 제어한다.

## Step 2: 하드 코딩된 데이터를 부모 컴포넌트로 전달하기

- state를 올리려면, 조정하려는 자식 컴포넌트의 가장 가까운 공통 부모 컴포넌트에 두어야 한다.
- 부모컴포넌트는 상위에 있고 props를 제어할 수 있기 때문에 그 상태에 대한 "진리의 원천(source of truth)"가 된다.

## Step 3: 공통 부모에 state 추가하기 

- 상태 끌어올리기는 종종 state로 저장하고 있는 것의 특성을 바꾼다.
- 문서 예시에서는 boolean값으로 가지고 있던 state를 아코디언에서 각 패널의 열림 여부를 알 수 있는 `activeIndex`로 바뀌었다.

## 각 state의 단일 진리의 원천

- 리액트 애플리케이션에서 많은 컴포넌트는 자체 state를 가진다.
- **각각의 고유한 state에 대해 어떤 컴포넌트가 "소유"할지 고를 수 있다.**
- **"단일 진리의 원천"**은 모든 state가 한 곳에 존재한다는 의미가 아니라 그 정보를 가지고 있는 특정 컴포넌트가 있다는 것을 말한다.

#### Deep Dive
**제어와 비제어 컴포넌트**

- 컴포넌트의 중요한 정보가 자체 지역 state 대신 props에 의해 만들어지는 경우 컴포넌트가 "제어된다"라고 한다.
- 이를 통해 부모 컴포넌트가 동작을 완전히 지정할 수 있다.

<br />

- 비제어 컴포넌트는 설정할 것이 적어 부모 컴포넌트에서 사용하기 쉽다.
- 하지만 여러 컴포넌트를 함께 조정하려고 할 때 비제어 컴포넌트는 덜 유연하다.
- 제어 컴포넌트는 최대한으로 유연하지만, 부모 컴포넌트에서 props로 충분히 설정해 주어야 한다.

<br />

- "제어"와 "비제어"는 엄격한 기술 용어가 아니며 일반적으로 컴포넌트는 지역 state와 props를 혼합해서 사용한다.

<br />

- 컴포넌트를 작성할 때 어떤 정보가 (props를 통해) 제어되어야 하고 어떤 정보가 (state를 통해) 제어되지 않아야 하는지 고려해야 한다.