문서 : https://frontend-fundamentals.com/code/

좋은 프론트엔드 코드 = **변경하기 쉬운 코드**

## 변경하기 쉬운 코드의 4가지 기준

- 4가지 기준을 모두 만족하기는 힘들다. 결합도, 응집도 처럼 서로 상충되는 요소가 있기 때문이다. 현재 직면한 상황을 바탕으로 어떤 가치를 우선해야 할지 고민해야 한다.
1. 가독성 
    1. 코드가 읽기 쉬운 정도
    2. 위에서 아래로 자연스럽게 이어지는 것
2. 예측 가능성 
    1. 협업간의 함수나 컴포넌트의 동작을 얼마나 예측할 수 있는지
    2. 일관적인 규칙을 따르고, 함수나 컴포넌트의 이름 파라미터, 반환 값만 보고 어떤 동작인지 예측할 수 있어야함
3. 응집도
    1. 수정되어야 할 코드가 항상 같이 수정되는지
4. 결합도
    1. 코드를 수정했을 때의 영향범위
    2. 영향범위가 적어서 변경에 따른 범위를 예측할 수 있는 코드가 수정하기 쉬운 코드

### 가독성

- **맥락 줄이기**
    - 같이 실행되지 않는 코드 분리하기
        - 하나의 컴포넌트 안에서 여러가지 분기를 처리하지 말고 각각의 분기에 대한 컴포넌트를 따로 만들어라
    - 구현 상세 추상화하기
        - 사용자가 로그인되었는지 확인하고 이동하는 로직을 `HOC`나 `Wrapper` 컴포넌트로 분리해서 가독성을 높인다.
        - 구현 상세를 지나치게 드러내는 경우, 코드의 역할을 정확하게 파악하기 힘들다. 보다 작은 단위로 추상화하는 것이 좋다.
    - 로직 종류에 따라 합쳐진 함수 쪼개기
        - 페이지에 모든 쿼리 파라미터를 관리하지 말고, 각각의 쿼리 파라미터별로 별도의 Hook 을 작성하라
        - 하나의 Hook으로 작성하면 담당할 책임이 무제한적으로 늘어날 수 있다.
- **이름 붙이기**
    - 복잡한 조건에 이름 붙이기
        - 로직이 여러 단계로 중첩되어 있어서 복잡할 때 중간 중간에 명시적인 이름을 붙이면, 코드를 읽는 사람이 한 번에 고려해야 할 맥락을 줄일 수 있다.
    - 매직 넘버에 이름 붙이기
        - 매직 넘버(Magic Number)란 정확한 뜻을 밝히지 않고 소스 코드 안에 직접 숫자 값을 넣는 것을 말한다.
        - 하나의 코드를 여러 명의 개발자가 함께 수정하다 보면 의도를 정확히 알 수 없어서 코드가 원하지 않는 방향으로 수정될 수 있다.
- **위에서 아래로 읽히게 하기**
    - 시점 이동 줄이기
        - 코드가 위에서 아래로, 하나의 함수나 파일에서 읽을 수 있도록 코드를 작성하면 읽는 사람이 동작을 빠르게 파악할 수 있게 된다.
        
        > ***** 코드를 읽는 것이 다른 사람의 글을 읽는 것 처럼 익숙한 형태로 자연스럽게 위에서 아래로 좌에서 우로 읽게 하자는 섹션이라고 생각한다.
        > 
    - 삼항 연산자 단순하게 하기
        - 중첩된 삼항 연산자는 `if` 문으로 풀어서 사용하면 명확하고 간결하게 조건을 드러낼 수 있다.

### 예측 가능성

- **이름 겹치지 않게 관리하기**
    - 같은 이름을 가지는 변수는 동일한 동작을 해야지, 코드를 예측해야 하는 피로도를 낮출 수 있다.
    - 예) 서비스에서 만든 함수에는 라이브러리의 함수명과 구분되는 명확한 이름을 사용한다.
- **같은 종류의 함수는 반환 타입 통일하기**
    - 같은 종류의 함수나 Hook이 서로 다른 반환 타입을 가지면 코드의 일관성이 떨어진다.
    - [엄격한 불리언 검증](https://typescript-eslint.io/rules/strict-boolean-expressions/)을 하지 않으면 오류가 발생하는 원인이 된다.
- **숨은 로직 드러내기**
    - Logging같은 숨은 로직이 있다면 협업 하는 동료들이 동작을 예측하는 데에 어려움을 겪을 수 있다.
    - 함수의 이름과 파라미터, 반환 타입으로 예측할 수 있는 로직만 구현 부분에 남기고, 이외의 코드는 별도로 분리한다.

### 응집도

- **함께 수정되는 파일을 같은 디렉토리에 두기**
    - 함께 수정되는 코드 파일을 하나의 디렉토리 아래에 둔다면, 코드 사이의 의존 관계를 파악하기 쉬워진다.
    - 특정 기능과 관련된 코드를 삭제할 때 한 디렉토리 전체를 삭제하면 깔끔하게 모든 코드가 삭제되는 이점이 있다.
- **매직 넘버 없애기**
    - 상수로 숫자의 맥락을 정확하게 표시하면 일부만 수정되는 상황을 방지할 수 있다.
- **폼의 응집도 생각하기**
    - 필드 단위 응집도
        - 개별 입력 요소를 독립적으로 관리하는 방식이다.
        - 각 필드가 고유의 검증 로직을 가지므로 변경이 필요한 범위가 줄어든다.
    - 폼 전체 단위 응집도
        - 모든 필드의 검증 로직이 폼에 종속되는 방식이다.
        - 폼 전체의 검증이 한 곳에서 관리되어 로직이 간결해지지만, 결함도가 높아져서 폼의 재사용성이 떨어진다.

### 결합도

- **책임을 하나씩 관리하기**
    - Hook 을 담당하는 책임을 분리하면 수정에 따른 영향이 갈 범위를 좁힐 수 있다.
- **중복 코드 허용하기**
    - 다소 반복되어 보이는 코드라도, 중복 코드를 허용하는 것이 좋은 방향일 수 있다.
    - 다양한 상황에서 유연한 대처가 가능하기 때문이다. (페이지 단위로 요구 사항이 달라졌을 때 같은 경우)
    
    > ***** 리액트의 개발자인 Dan abramov 에서 읽은 https://overreacted.io/goodbye-clean-code/ 와 같은 맥락이라고 생각한다.
    ***** 또한 중복을 너무 줄이려다 가독성에 부정적인 영향을 끼칠 수 있다.
    > 
- **Props Drilling 지우기**
    - 부모 컴포넌트가 자식 컴포넌트에게 그대로 Props를 전달하는 Props Drilling 을 줄이는 것이 좋다.
    - 조합 (Composition) 패턴을 활용하는 것도 좋은 방법이다.