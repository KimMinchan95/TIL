# 암호

[[10분 테코톡] 알린의 암호](https://www.youtube.com/watch?v=UJDB6e8s1Fg&list=PLkfxusmKmLsNDGmER2tmrslpPOTfKhE7j&index=118&t=382s)

## 암호란

### 암호의 정의

- 중요한 정보를 읽기 어려운 값으로 변환하여 제 3자가 볼 수 없도록 하는 기술
- 수학적인 원리에 기반
- 보안에 기초가 되는 원천 기술

### 암호의 구성요소

- 평문, 암호문, 암호화 알고리즘, 키
- 평문과 키를 암호화 알고리즘에 넣었을 때 암호문이 나온다.
- 암호문과 키를 복호화 알고리즘에 넣었을 때 평문이 나온다.

### 암호의 사용 이유

크게 **기밀성, 무결성, 사용자 인증, 부인 방지** 4가지로 말할 수 있다.

- 기밀성 - 노출 위험으로부터 데이터를 안전하게 보호
    - 평문을 그대로 전송하면 통신이나 데이터 베이스에서 정보를 유출 당했을 때, 정보가 노출된다.
- 무결성 - 변조 위험으로부터 데이터를 안전하게 보호
    - 전송자에게서 수신자에게 데이터가 갈때 변조될 위험을 보호
- 사용자 인증 - 안전한 사용자인지 확인
    - 사용자가 서버를 인증하고, 서버도 사용자를 인증해야 한다.
    - 인증하지 않으면, 공격자가 사용자인척 & 서버인척 할 수 있다.
- 부인 방지 - 메시지를 송/수신 한 사실을 부인할 수 없도록 확인
    - 데이터를 부인할 수 없도록 부인 방지기능이 필요하다.

## 암호 분류

- 단방향 암호
    - 해시 함수
- 양방향 암호
    - 대칭키 암호
    - 비대칭키 암호

### **대칭키 암호 (양방향 암호)**

- 하나의 키를 공유하여 사용하는 방식
    - 잠점
        - 비대칭키 암호화보다 연산량이 적고 **빠름**
        - **대용량 데이터 암호화** 가능
    - 단점
        - 기밀성 외 기능 제공이 **어려움**
        - 통신하는 수 만큼의 키가 필요하기 때문에 **키 관리가 어려움**
- 블록 암호
    - Feistel, SPN 구조
    - 블록 길이 단위로 암호화 - 128bit, 192bit, 256bit
    - 블록 길이를 맞추기 위해 패딩 추가 - 블록 길이의 배수
    - 예시) 평문(100bit) + 패딩(28bit) 로 128bit를 맞춰 준다.
- 스트림 암호
    - 1bit 단위로 암호화
    - XOR을 사용하여 암호화
    - 블록 암호보다 빠르지만 안전하지 않음
    - 무선 환경에서 주로 사용

 

### **비대칭키 암호 (양방향 암호)**

- 암호화, 복호화 시 사용하는 키가 다른 방식
- 사용 방향에 따라 공개키 암호, 전자 서명 방식으로 구분
    - 공개키 암호(공개키로 암호화하는 방식)
        - 사용하는 곳
            - https사용 할때 인증서 공개키
                - 서버만 암호화한 데이터를 볼 수 있다.
            - EC2 접속시 사용
        - 공개키로 암호화 → 비밀키로 복호화
        - 비밀키가 있어야 데이터를 읽을 수 있다.
        - 대칭키 분배
    - 전자 서명(비밀키로 암호화하는 방식)
        - 비밀키로 암호화 → 공개키로 복호화
        - 내가 암호화했다는 것을 증명할 수 있다.
        - 무결성, 인증, 부인 방지
        - SSL 인증서 → 인증기관 서명
- 연산량이 많아 느림
- RSA, ElGamal, ECC

### **해시함수 (단방향 암호)**

- 언제나 고정된 길이의 해시 값을 출력하는 함수
- 입력이 1bit만 수정되어도 전혀 다른 해시 값 출력 (눈덩이 효과)
- 특징
    - 단방향
    - 장점
        - 빠름
        - 무결성
        - 대규모 데이터 암호화 가능
    - 단점
        - 복호화가 안된다.
- 메시지인증코드(MAC, Message Authentication Code)에 사용
    - 메시지의 해시 함수 결과 값(MAC)을 메시지와 함께 전송
    - 수신자는 메시지의 해시 결과 값과 MAC을 비교하여 **무결성 확인**
    - JWT 토큰에서 사용
- 전사서명 (대규모 데이터 전자서명)
    - 대규모 데이터를 직접 비대칭키로 암호화하기 어려움
    - 데이터를 해시 값으로 만들고 **해시 값을 전자 서명**