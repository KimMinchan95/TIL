> <이펙티브 타입스크립트>(댄 밴더캄 지음, 장원호 옮김, 인사이트, 2021)

#### 아이템 45 - devDependencies에 typescript와 @types 추가하기

- npm(node package manager)은 자바스크립트 라이브러리 저장소(`npm` 레지스트리)와, 프로젝트가 의존하고 있는 라이브러리들의 버전을 지정하는 방법(`package.json`)을 제공한다.

**npm은 세 가지 종류의 의존성을 구분해서 관리한다.** (각가의 의존성은 `package.json` 파일 내의 별도 영역에 들어 있다.)

- dependencies
  - 현재 프로젝트를 **실행하는 데** 필수적인 라이브러리들이 포함된다.
  - 런타임에 필요한 라이브러리들이 포함되는 것이다.
  - 다른 사용자가 해당 프로젝트를 설치할 때 `dependencies`에 들어 있는 라이브러리도 함께 설치된다. - 전이(transitive) 의존성
- devDependencies
  - 프로젝트를 개발하고 테스트하는데 사용되지만, 런타임에는 필요 없는 라이브러리들이 포함된다.
  - 다른 사용자가 해당 프로젝트를 설치할때 `devDependencies`에 포함된 라이브러리들은 제외된다.
  - 타입스크립트는 개발 도구 일 뿐 타입 정보는 런타임에 존재하지 않기 때문에 `devDependencies`에 속한다.
    - 런타임에 `@types`가 필요한 경우라면 별도의 작업이 필요할 수 있다.
- peerDependencies
  - 런타임에 필요하긴 하지만, 의존성을 직접 관리하지 않는 라이브러리들이다.
  - 제이쿼리 플러그인은 다양한 버전이 호환됨으로 직접 버전을 선택하지 않기때문에 여기에 들어간다.

#### 아이템 46 - 타입 선언과 관련된 세 가지 버전 이해하기

- 타입스크립트는 의존성 문제를 복잡하게 만든다.
- 그 이유는 타입스크립트를 사용하면 세 가지 사항을 추가로 고려해야 하기 때문이다.
  - 라이브러리의 버전
  - 타입 선언(@types)의 버전
  - 타입스크립트의 버전

<br />

**타입스크립트의 버전 문제와 해결 방법**

**문제 1 - 라이브러리를 업데이트 했지만 실수로 타입 선언은 업데이트 하지 않았을 때**

- 하위 호환성이 깨지는 변경이 있으면, 런타임 오류가 발생할 수도 있다.

해결방법

- 타입 선언도 업데이트하여 라이브러리와 버전을 맞춘다.
- 타입 선언 버전이 준비되지 않았을 경우
  - 보강(augmentation) 기법을 활용하여 프로젝트 자체에 추가
  - 타입 선언의 업데이트를 직접 작성하고 커뮤니티에 기여

**문제 2 - 라이브러리보다 타입 선언의 버전이 최신인 경우**

- 라이브러리와 타입 선언의 버전이 맞도록 라이브러리 버전을 올린다.
- 타입 선언의 버전을 내린다.

**문제 3 - 타입스크립트 버전보다 라이브러리에서 필요로 하는 타입스크립트 버전이 최신인 경우**

- 프로젝트의 타입스크립트 버전을 올린다.
- 라이브러리 타입 선언의 버전을 원래대로 내린다.
- `declare module` 선언으로 라이브러리의 타입 정보를 없앤다.
- 매우 드문 경우로 `typesVersions`를 이용해 버전별로 타입 선언을 제공할 경우 사용한다.

**문제 4 - `@types` 의존성이 중복이 된 경우**

- `npm ls @types/foo` 같은 명령어를 통해 타입 선언 중복을 추적해서, 서로 버전이 호환되게 한다.

#### 아이템 47 - 공개 API에 등장하는 모든 타입 익스포트하기

- 라이브러리 제작자는 프로젝트 초기에 타입 익스포트를 작성해야 한다.
  - 타입들이 익스포트된 함수 시그니처에만 등장할 경우 `Parameters`와 `ReturnType` 제네릭 타입을 사용해서 추출하는 방법을 사용해야 한다.

#### 아이템 48 - API 주석에 TSDoc 사용하기

- 사용자를 위한 문서에는 JSDoc 스타일의 주석으로 만드는 것이 좋다.
  - 편집기에서 함수가 호출되는 곳에서 JSDoc 스타일의 주석을 툴팁으로 표시해 주기 때문이다.
  - 인라인 주석은 편집기가 표시해 주지 않는다.

```ts
/** 인사말을 생성합니다. 결과는 보기 좋게 꾸며집니다. */
function greetJSDoc(name: string, title: string) {
  return `Hello ${title} ${name}`;
}
```

<br />

- JSDoc(TSDoc)에는 `@param`과 `@returns` 같은 일반적 규칙을 사용할 수 있다.
  - 함수를 호출하는 부분에서 각 매개변수와 관련된 설명을 보여 준다.
- 타입 정의에 JSDoc을 사용할 수도 있다.
- 마크다운(markdown) 형식으로 꾸밀 수도 있다. (굵은 글씨, 기울임, 글머리기호 목록 등)
- 주석을 수필처럼 장황하게 쓰지 않아야 한다.
- 타입스크립트에서는 타입 정보가 코드에 있기 떄문에 TSDoc에서는 타입 정보를 명시하면 안된다.
