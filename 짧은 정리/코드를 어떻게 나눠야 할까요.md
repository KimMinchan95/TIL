# 코드를 어떻게 나눠야 할까요? (feat.호이스팅)

[코드를 어떻게 나눠야 할까요? (feat. 호이스팅) - Taehoon](https://youtu.be/k9uEtsDAuvY)

#### 코드 분리와 호이스팅
- `let`과 `const` 키워드를 보면 **TDZ**(Temprol Dead Zone)을 두어서 호이스팅을 권고하지 않는 것 처럼 보인다.
- JS는 기본적으로 함수 선언 키워드에서 호이스팅을 지원하고 있다.
    - 이를 활용하면 좀 더 좋은 코드를 작성하는데 도움이 될 수 있다.

**함수 선언**
> "함수 선언은 이럴 때 해야한다." 라는 명확한 기준은 없지만, 보통 통용되는 방식들은 존재한다.
- 코드 로직을 나열하다보니 코드가 너무 길어져서 이해하기 힘들어질때
    - 함수를 이용해서 적절하게 로직을 분할하는게 도움이 된다.
- 특정 코드 구문이 여러 곳에서 중복되어서 사용될 때
    - 함수로 선언을 해두면, 코드를 중복해서 작성하는 것을 막을 수 있다.
- 코드가 둘 이상의 로직을 한 곳에 담고 있다면, 담고 있다고 생각이 든다면
    - 의미를 명확하게 하기 위해서 함수를 이용해서 구분할 수 있다.

이렇게 코드 로직을 나누다 보면 파일로 나누어서 구분하게 된다. 이는 어떻게 보면 모듈을 구성하는 것이다.
- JS에서는 사실상 파일과 모듈은 1:1 대응이 된다.
    - `export` 키워드를 특정 파일 전체에 걸쳐서 사용하기 때문이다.
- 무엇이 되건 최종적으로 바깥에 드러나는 부분은, 파일 시스템이다.

#### export
- JS 모듈을 구성하다 보면 `export` 키워드를 사용하게 된다.
```js
// 1)
function test() { ... }
export function test2() { ... }

// 2)
class A { ... }
export class B { ... }
```
- `export`를 하면 외부에서 불러다가 쓸 수 있고, `export`를 하지 않으면 쓸 수 없다.
    - 내부에 있는 변수를 외부에 공개할 것인지를 프로그래머가 결정하는 것이다.
- 하지만 이렇게 `export`를 하는 순간 프로그래머의 손을 떠나 전체 공개가 되는 것이다.
    - 어느 디렉토리에 있는 파일에 상관없이 `import`를 해서 사용하는게 가능하다.

#### 예시
```js
function main() {
    // [1]
    function add(n1, n2) {
        return n1 + n2;
    }

    ...
    const v = add(3, 4);
    ...

    // [2]
    function add(n1, n2) {
        return n1 + n2;
    }
}

function main2() { ... }
function main3() { ... }

// [3]
function add(n1, n2) { ... }

// [4]
export function add(n1, n2) { ... }
```

**예시 설명**
- `add` 함수를 아주 명확한 다른 무언가 기능을 가진 함수라고 가정해보자.
- 이 `add` 함수는 `main` 함수 내부에서만 사용이 되고 있다.
- 이 `add`함수를 어디다 두어야 할까?
    - 경우에 따라서 다르다.

<br />

- 이 `add`함수를 외부에서 사용할 것이 아니라면 4번인 `export`를 사용하는건 좋지 않다.
- 1번과 2번 위치에 존재한다면 "`main2`함수나 `main3`함수에서 `add`함수를 쓸 일 없겠구나" 라는 것을 알 수 있다.
    - 3번 위치에 `add`함수를 배치한다면 불필요한 정보를 제공하는 셈이 된다.
- 2번이 가능한 것은 JS에서 호이스팅을 지원해주기 때문이다.
- 1번과 2번 위치는 `add`함수가 얼마나 중요한 지에 따라서 배치의 선택이 다르게 된다.
    - 위의 코드에서는 `add`함수는 이름반 봐도 역할이 분명하다.
    - 괜히 `add`함수를 `main`함수 코드 내부 앞이나 중간에 넣어서 코드를 읽는 프로그래머의 시선을 불필요하게 뺏을 필요가 없다.
        - 이럴 경우에는 2번 위치에 놓는 것이 적절하다.
    - `main`함수를 이해하는데 `add`함수를 이해하는게 정말 필수적이다 하면, 1번 위치에 두어서 바로 보게 만드는 것이 적절하다.
