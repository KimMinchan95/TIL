# Reacting to Input with State

- 리액트는 선언적인 방식으로 UI를 조작한다.
- 개별적인 UI를 직적 조작하는 것 대신 컴포넌트 내부에 여러 state를 묘사하고 사용자의 입력에 따라 state를 변경한다.

## 선연형 UI와 명령형 UI 비교

- **명령형 프로그래밍**에서 UI를 조작하기 위해서는 발생한 상황에 따라 정확한 지침을 작성해야만 한다.
    - 새로운 UI 요소나 새로운 인터랙션을 추가하려면 버그의 발생을 막기 위해 기존의 모든 코드를 주의 깊게 살펴봐야 한다.

<br />

- 리액트에서는 직접 UI를 조작할 필요 없이 **무엇을 보여주고 싶은지 선언**하기만 하면 된다.


## UI를 선언적인 방식으로 생각하기

1. 컴포넌트의 다양한 시각적 state를 **확인하라.**
2. 무엇이 state 변화를 트리거하는지 **알아내라.**
3. `useState`를 사용해서 메모리의 state를 **표현하라.**
4. 불필요한 state 변수를 **제거하라.**
5. state 설정을 위해 이벤트 핸들러를 **연결하라.**

## 첫 번째: 컴포넌트의 다양한 시각적 state 확인하기

- 리액트는 디자인과 컴퓨터 과학의 사이에 있기 때문에 아래 두 아이디어 모두에게서 영감을 얻었다.
    - 디자인 측면에서 다양한 "시각적 state"에 관한 모형
    - 컴퓨터 과학에서 여러가지 "state"를 가지고 있는 "상태 기계"

- 먼저 사용자가 볼 수 있는 UI의 모든 "state"를 시각화해야 한다.
    - prop에 의해 "컨트롤"되는 프로토타입을 만들어봐라

<br />

#### Deep DIVE

- Displaying many visual states at once
    - 컴포넌트가 많은 시각적 state를 가지고 있다면 한 페이지에서 모두 보여주는 것도 편하게 할 수 있다.
    - 이런 페이지를 "살아있는 스타일가이드(living styleguides)" 또는 "스토리북(storybooks)"이라고 부른다.

## 두 번째: 무엇이 state 변화를 트리거하는지 알아내기
- 두 종류의 인풋 유형으로 state 변경을 트리거할 수 있다. 두 가지 경우 모두 **UI를 업데이트하기 위해서는 state변수를 설정해야 한다.**
    - **휴먼 인풋** : 버튼을 누르거나, 필드를 입력하거나, 링크를 이동하는 등
    - **컴퓨터 인풋** : 네트워크 응답이 오거나, 타임아웃이 되거나, 이미지를 로딩하는 등

<br />

- 이와 같은 흐름은 그려서 시각화할 수 있다.
    - 이러한 과정을 통해 state 변화의 흐름을 파악할 수 있을 뿐 아니라 구현 전에 버그를 찾을 수도 있다.

## 세 번째: 메모리의 state를 `useState`로 표현하기
- `useState`를 사용해서 컴포넌트의 시각적 state를 표현해야 한다.
- 각각의 state는 "움직이는 조각"이다.
    - **"움직이는 조각"(state)은 적을수록 좋다"**
    - 복잡하면 버그를 유발시키기 때문이다.

<br />

- state를 줄이는 방법이 생각나지 않으면 모든 시각적 state를 커버할 수 있는 방법을 추가하고 리팩토링으로 줄여나갈 수 있다.

## 네 번째: 불필요한 state 변수를 제거하기

- state 구조를 리팩토링하는 데 시간을 조금만 투자하면 컴포넌트는 더 이해하기 쉬워지고 불필요한 중복은 줄어든다.
- 리팩토링의 목표는 **state가 사용자에게 유효한 UI를 보여주지 않는 경우를 방지하는 것이다.**

<br />

- state 변수에 관한 확인 사항
    - **state가 역설을 일으키지는 않는가?** : 보통 state가 충분히 제한되지 않았음을 의미한다.
    - **다른 state 변수에 이미 같은 정보가 담겨있지는 않은가?** : 이미 담겨있는 정보를 활용하여 싱크가 맞지 않거나 버그를 방지할 수 있다.
    - **다른 변수를 뒤집었을 때 같은 정보를 얻을 수 있진 않은가?**

<br />

#### Deep Dive

- Eliminating "impossible" states with a reducer
    - state를 조금 더 정확하게 모델링하기 위해서는 "리듀서로 분리"하는 방법도 있다.
    - 리듀서를 사용하면 여러 state 변수를 하나의 객체로 통합하고 관련된 모든 로직을 합칠 수 있다.

## 다섯 번째: state 설정을 위해 이벤트 핸들러를 연결하기

- state 변수를 설정하기 위해 이벤트 핸들러를 연결하라
